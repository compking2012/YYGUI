<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Porsche.js API documentation: Source: ui/view/chart.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="styles/bootstrap-custom.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
  </head>
  <body>
    <header class="header navbar navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="#"><strong>Porsche.js</strong> API documentation</a>
        </div>
      </div>
    </header>

    <div class="container-fluid">
      <div class="row-fluid">
          <div class="span3">
              <h2><a href="index.html">Index</a></h2><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Modules</li><li><a href="module-AutoLayout.html">AutoLayout</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Classes</li><li><a href="App.html"><i class="icon-shield" style="color: #0186d1"></i> App</a></li><li><a href="EventEmitter.html"><i class="icon-shield" style="color: #0186d1"></i> EventEmitter</a></li><li><a href="CubicBezier.html"><i class="icon-shield" style="color: #0186d1"></i> CubicBezier</a></li><li><a href="Event.html"><i class="icon-shield" style="color: #0186d1"></i> Event</a></li><li><a href="GestureEvent.html"><i class="icon-shield" style="color: #0186d1"></i> GestureEvent</a></li><li><a href="InputEvent.html"><i class="icon-shield" style="color: #0186d1"></i> InputEvent</a></li><li><a href="KeyboardEvent.html"><i class="icon-shield" style="color: #0186d1"></i> KeyboardEvent</a></li><li><a href="TouchEvent.html"><i class="icon-shield" style="color: #0186d1"></i> TouchEvent</a></li><li><a href="UIEvent.html"><i class="icon-shield" style="color: #0186d1"></i> UIEvent</a></li><li><a href="initialize.html"><i class="icon-shield" style="color: #0186d1"></i> initialize</a></li><li><a href="LongPressRecognizer.html"><i class="icon-shield" style="color: #0186d1"></i> LongPressRecognizer</a></li><li><a href="PanRecognizer.html"><i class="icon-shield" style="color: #0186d1"></i> PanRecognizer</a></li><li><a href="PinchRecognizer.html"><i class="icon-shield" style="color: #0186d1"></i> PinchRecognizer</a></li><li><a href="RotationRecognizer.html"><i class="icon-shield" style="color: #0186d1"></i> RotationRecognizer</a></li><li><a href="SwipeRecognizer.html"><i class="icon-shield" style="color: #0186d1"></i> SwipeRecognizer</a></li><li><a href="TapRecognizer.html"><i class="icon-shield" style="color: #0186d1"></i> TapRecognizer</a></li><li><a href="module-AutoLayout-View.html"><i class="icon-shield" style="color: #0186d1"></i> View</a></li><li><a href="ColumnLayout.html"><i class="icon-shield" style="color: #0186d1"></i> ColumnLayout</a></li><li><a href="ColumnLayoutParam.html"><i class="icon-shield" style="color: #0186d1"></i> ColumnLayoutParam</a></li><li><a href="FlowLayout.html"><i class="icon-shield" style="color: #0186d1"></i> FlowLayout</a></li><li><a href="FlowLayoutParam.html"><i class="icon-shield" style="color: #0186d1"></i> FlowLayoutParam</a></li><li><a href="GridLayout.html"><i class="icon-shield" style="color: #0186d1"></i> GridLayout</a></li><li><a href="GridLayoutParam.html"><i class="icon-shield" style="color: #0186d1"></i> GridLayoutParam</a></li><li><a href="Layout.html"><i class="icon-shield" style="color: #0186d1"></i> Layout</a></li><li><a href="RelativeLayout.html"><i class="icon-shield" style="color: #0186d1"></i> RelativeLayout</a></li><li><a href="RowLayout.html"><i class="icon-shield" style="color: #0186d1"></i> RowLayout</a></li><li><a href="RowLayoutParam.html"><i class="icon-shield" style="color: #0186d1"></i> RowLayoutParam</a></li><li><a href="Matrix.html"><i class="icon-shield" style="color: #0186d1"></i> Matrix</a></li><li><a href="Point.html"><i class="icon-shield" style="color: #0186d1"></i> Point</a></li><li><a href="Rectangle.html"><i class="icon-shield" style="color: #0186d1"></i> Rectangle</a></li><li><a href="BarCode.html"><i class="icon-shield" style="color: #0186d1"></i> BarCode</a></li><li><a href="Button.html"><i class="icon-shield" style="color: #0186d1"></i> Button</a></li><li><a href="Chart.html"><i class="icon-shield" style="color: #0186d1"></i> Chart</a></li><li><a href="CheckBox.html"><i class="icon-shield" style="color: #0186d1"></i> CheckBox</a></li><li><a href="CircleProgressView.html"><i class="icon-shield" style="color: #0186d1"></i> CircleProgressView</a></li><li><a href="CompositeView.html"><i class="icon-shield" style="color: #0186d1"></i> CompositeView</a></li><li><a href="Dialog.html"><i class="icon-shield" style="color: #0186d1"></i> Dialog</a></li><li><a href="ImageButton.html"><i class="icon-shield" style="color: #0186d1"></i> ImageButton</a></li><li><a href="ImageView.html"><i class="icon-shield" style="color: #0186d1"></i> ImageView</a></li><li><a href="Indicator.html"><i class="icon-shield" style="color: #0186d1"></i> Indicator</a></li><li><a href="ListItem.html"><i class="icon-shield" style="color: #0186d1"></i> ListItem</a></li><li><a href="ListView.html"><i class="icon-shield" style="color: #0186d1"></i> ListView</a></li><li><a href="ProgressView.html"><i class="icon-shield" style="color: #0186d1"></i> ProgressView</a></li><li><a href="QRCode.html"><i class="icon-shield" style="color: #0186d1"></i> QRCode</a></li><li><a href="RichTextView.html"><i class="icon-shield" style="color: #0186d1"></i> RichTextView</a></li><li><a href="ScrollableView.html"><i class="icon-shield" style="color: #0186d1"></i> ScrollableView</a></li><li><a href="ScrollBar.html"><i class="icon-shield" style="color: #0186d1"></i> ScrollBar</a></li><li><a href="Slider.html"><i class="icon-shield" style="color: #0186d1"></i> Slider</a></li><li><a href="StackView.html"><i class="icon-shield" style="color: #0186d1"></i> StackView</a></li><li><a href="SwipeView.html"><i class="icon-shield" style="color: #0186d1"></i> SwipeView</a></li><li><a href="Switch.html"><i class="icon-shield" style="color: #0186d1"></i> Switch</a></li><li><a href="TextField.html"><i class="icon-shield" style="color: #0186d1"></i> TextField</a></li><li><a href="TextView.html"><i class="icon-shield" style="color: #0186d1"></i> TextView</a></li><li><a href="View.html"><i class="icon-shield" style="color: #0186d1"></i> View</a></li><li><a href="Window.html"><i class="icon-shield" style="color: #0186d1"></i> Window</a></li><li><a href="YObject.html"><i class="icon-shield" style="color: #0186d1"></i> YObject</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Namespaces</li><li><a href="VisualFormat.html"><i class="icon-code"></i> VisualFormat</a></li></ul></div><div class="well well-small"><ul class="nav nav-list"><li class="nav-header">Global</li><li><a href="global.html#createInput"><i class="icon-globe" style="color: black;"></i> createInput</a></li><li><a href="global.html#add"><i class="icon-globe" style="color: black;"></i> add</a></li><li><a href="global.html#remove"><i class="icon-globe" style="color: black;"></i> remove</a></li><li><a href="global.html#emit"><i class="icon-globe" style="color: black;"></i> emit</a></li><li><a href="global.html#stop"><i class="icon-globe" style="color: black;"></i> stop</a></li><li><a href="global.html#recognize"><i class="icon-globe" style="color: black;"></i> recognize</a></li><li><a href="global.html#set"><i class="icon-globe" style="color: black;"></i> set</a></li><li><a href="global.html#recognizeWith"><i class="icon-globe" style="color: black;"></i> recognizeWith</a></li><li><a href="global.html#dropRecognizeWith"><i class="icon-globe" style="color: black;"></i> dropRecognizeWith</a></li><li><a href="global.html#requireFailure"><i class="icon-globe" style="color: black;"></i> requireFailure</a></li><li><a href="global.html#dropRequireFailure"><i class="icon-globe" style="color: black;"></i> dropRequireFailure</a></li><li><a href="global.html#hasRequireFailures"><i class="icon-globe" style="color: black;"></i> hasRequireFailures</a></li><li><a href="global.html#canRecognizeWith"><i class="icon-globe" style="color: black;"></i> canRecognizeWith</a></li><li><a href="global.html#tryEmit"><i class="icon-globe" style="color: black;"></i> tryEmit</a></li><li><a href="global.html#canEmit"><i class="icon-globe" style="color: black;"></i> canEmit</a></li><li><a href="global.html#stateStr"><i class="icon-globe" style="color: black;"></i> stateStr</a></li><li><a href="global.html#directionStr"><i class="icon-globe" style="color: black;"></i> directionStr</a></li><li><a href="global.html#process"><i class="icon-globe" style="color: black;"></i> process</a></li><li><a href="global.html#reset"><i class="icon-globe" style="color: black;"></i> reset</a></li><li><a href="global.html#handleInputEvent"><i class="icon-globe" style="color: black;"></i> handleInputEvent</a></li><li><a href="global.html#computeInputData"><i class="icon-globe" style="color: black;"></i> computeInputData</a></li><li><a href="global.html#simpleCloneInputData"><i class="icon-globe" style="color: black;"></i> simpleCloneInputData</a></li><li><a href="global.html#computeIntervalInputData"><i class="icon-globe" style="color: black;"></i> computeIntervalInputData</a></li><li><a href="global.html#getCenter"><i class="icon-globe" style="color: black;"></i> getCenter</a></li><li><a href="global.html#getVelocity"><i class="icon-globe" style="color: black;"></i> getVelocity</a></li><li><a href="global.html#getDirection"><i class="icon-globe" style="color: black;"></i> getDirection</a></li><li><a href="global.html#getDistance"><i class="icon-globe" style="color: black;"></i> getDistance</a></li><li><a href="global.html#getAngle"><i class="icon-globe" style="color: black;"></i> getAngle</a></li><li><a href="global.html#getRotation"><i class="icon-globe" style="color: black;"></i> getRotation</a></li><li><a href="global.html#getScale"><i class="icon-globe" style="color: black;"></i> getScale</a></li><li><a href="global.html#hasParent"><i class="icon-globe" style="color: black;"></i> hasParent</a></li><li><a href="global.html#normalizeSingleTouches"><i class="icon-globe" style="color: black;"></i> normalizeSingleTouches</a></li><li><a href="global.html#attrTest"><i class="icon-globe" style="color: black;"></i> attrTest</a></li><li><a href="global.html#getTouches"><i class="icon-globe" style="color: black;"></i> getTouches</a></li><li><a href="global.html#Attribute"><i class="icon-globe" style="color: black;"></i> Attribute</a></li><li><a href="global.html#Relation"><i class="icon-globe" style="color: black;"></i> Relation</a></li><li><a href="global.html#Priority"><i class="icon-globe" style="color: black;"></i> Priority</a></li><li><a href="global.html#value"><i class="icon-globe" style="color: black;"></i> value</a></li><li><a href="global.html#defineClass"><i class="icon-globe" style="color: black;"></i> defineClass</a></li><li><a href="global.html#getClass"><i class="icon-globe" style="color: black;"></i> getClass</a></li><li><a href="global.html#checkLineBreak"><i class="icon-globe" style="color: black;"></i> checkLineBreak</a></li><li><a href="global.html#isHex"><i class="icon-globe" style="color: black;"></i> isHex</a></li><li><a href="global.html#isNumber"><i class="icon-globe" style="color: black;"></i> isNumber</a></li><li><a href="global.html#isEmpty"><i class="icon-globe" style="color: black;"></i> isEmpty</a></li><li><a href="global.html#trim"><i class="icon-globe" style="color: black;"></i> trim</a></li><li><a href="global.html#focus"><i class="icon-globe" style="color: black;"></i> focus</a></li><li><a href="global.html#blur"><i class="icon-globe" style="color: black;"></i> blur</a></li><li><a href="global.html#addGestureRecognizer"><i class="icon-globe" style="color: black;"></i> addGestureRecognizer</a></li><li><a href="global.html#removeGestureRecognizer"><i class="icon-globe" style="color: black;"></i> removeGestureRecognizer</a></li><li><a href="global.html#toString"><i class="icon-globe" style="color: black;"></i> toString</a></li></ul></div>
          </div>

          <div class="span9">
              <h1 class="page-header">Source: ui/view/chart.js</h1>
              


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
* Porsche.js is licensed under the MIT license. If a copy of the
* MIT-license was not distributed with this file, You can obtain one at:
* http://opensource.org/licenses/mit-license.html.
*
* @author: Yang Yang (compking@gmail.com)
* @license MIT
* @copyright Yang Yang, 2015
*/

"use strict";
var Class = require("../../class");
var View = require("./view");

/**
 * Chart which can draw chart.
 * @class Chart
 * @extends CompositeView
 */
Class.define("framework.ui.view.Chart", View, {
    /**
     * Constructor that create a view
     * @method Chart#initialize
     * @param dataset {Number[]} the data values that the chart shows.
     * @param labelset {String[]} the labels of X Axis shows.
     */
    initialize: function(dataset, labelset) {
        View.prototype.initialize.apply(this, arguments);

        this._dataset = dataset;
        this._labels = labelset;
        this._mode = "bar";
        this._showGridLine = true;
        this._gridLineColor = "#FFFFFF";
        this._gridLineWidth = 1.0;
        this._fillColor = "#FF0000";
        this._strokeColor = "#FFFFFF";
        this._strokeLineWidth = 1.0;
        this._drawXAxis = true;
        this._drawYAxis = true;
        this._xLabelFontWeight = "normal";
        this._xLabelFontStyle = "normal";
        this._xLabelFontSize = "14px";
        this._xLabelFontFamily = "default";
        this._xLabelFontColor = "#FFFFFF";
        this._xLabelTextAlign = "center";
        this._yLabelFontWeight = "normal";
        this._yLabelFontStyle = "normal";
        this._yLabelFontSize = "12px";
        this._yLabelFontFamily = "default";
        this._yLabelFontColor = "#FFFFFF";
        this._yLabelTextAlign = "right";
        this._labelMargin = 10;
        this._stepsY = 10;
        this._barSpacing = 3;
        this._rightBlank = 20;
        this._topBlank = 20;

        this._dotRadius = 3;
        this._dotColor = "#FF0000";
        this._dotWidth = 1;
        this._showAverageLine = true;
        this._averageLineWidth = 1.0;
        this._averageLineColor = "#ffffff";
        this._bezierCurve = true;
        this._tension = 0.4;

        this._zeroX = 0;
        this._zeroY = 0;

    },

    destroy: function() {
        this._dataset = null;
        this._labels = null;

        View.prototype.destroy.apply(this, arguments);
    },

    /**
     * @name Chart#dataset
     * @type {Number[]}
     * @description the data values that the chart shows.
     */
    get dataset() {
        return this._dataset;
    },

    set dataset(value) {
        this._dataset = value;
        this.invalidate();
    },

    /**
     * @name Chart#mode
     * @type {String} the value should be "line" or "bar"
     * @description the type of chart to display.
     */
    get mode() {
        return this._mode;
    },

    set mode(value) {
        this._mode = value;
        this.invalidate();
    },

    /**
     * @name Chart#showGridLine
     * @type {Boolean}
     * @description Whether to show the gridlines or not, default true.
     */
    get showGridLine() {
        return this._showGridLine;
    },

    set showGridLine(value) {
        this._showGridLine = value;
        this.invalidate();
    },

    /**
     * @name Chart#gridlineColor
     * @type {String}
     * @description The color of gridlines, such as "#FF0000" or "rgba(255,255,0,0.4)"
     */
    get gridlineColor() {
        return this._gridLineColor;
    },

    set gridlineColor(value) {
        this._gridLineColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#gridLineWidth
     * @type {Number}
     * @description The line width of gridlines
     */
    get gridLineWidth() {
        return this._gridLineWidth;
    },

    set gridLineWidth(value) {
        this._gridLineWidth = value;
        this.invalidate();
    },

    /**
     * @name Chart#fillColor
     * @type {String}
     * @description The color filled the chart, such as "#FF0000" or "rgba(255,255,0,0.4)"
     */
    get fillColor() {
        return this._fillColor;
    },

    set fillColor(value) {
        this._fillColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#stepsY
     * @type {Number}
     * @description The number of gridlines on y axis
     */
    get stepsY() {
        return this._stepsY;
    },

    set stepsY(value) {
        this._stepsY = value;
        this.invalidate();
    },

    /**
     * @name Chart#strokeColor
     * @type {String}
     * @description The color of the chart lines
     */
    get strokeColor() {
        return this._strokeColor;
    },

    set strokeColor(value) {
        this._strokeColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#strokeLineWidth
     * @type {String}
     * @description The width of the chart lines
     */
    get strokeLineWidth() {
        return this._strokeLineWidth;
    },

    set strokeLineWidth(value) {
        this._strokeLineWidth = value;
        this.invalidate();
    },

    /**
     * @name Chart#drawXAxis
     * @type {Boolean}
     * @description Whether to show x axis
     */
    get drawXAxis() {
        return this._drawXAxis;
    },

    set drawXAxis(value) {
        this._drawXAxis = value;
        this.invalidate();
    },

    /**
     * @name Chart#drawYAxis
     * @type {Boolean}
     * @description Wheter to show Y axis
     */
    get drawYAxis() {
        return this._drawYAxis;
    },

    set drawYAxis(value) {
        this._drawYAxis = value;
        this.invalidate();
    },

    /**
     * @name Chart#xLabelFontWeight
     * @type {String}
     * @description The fontWeight of x labels
     */
    get xLabelFontWeight() {
        return this._xLabelFontWeight;
    },

    set xLabelFontWeight(value) {
        this._xLabelFontWeight = value;
        this.invalidate();
    },

    /**
     * @name Chart#xLabelFontStyle
     * @type {String}
     * @description The fontStyle of x labels
     */
    get xLabelFontStyle() {
        return this._xLabelFontStyle;
    },

    set xLabelFontStyle(value) {
        this._xLabelFontStyle = value;
        this.invalidate();
    },

    /**
     * @name Chart#xLabelFontColor
     * @type {String}
     * @description The fontColor of x labels
     */
    get xLabelFontColor() {
        return this._xLabelFontColor;
    },

    set xLabelFontColor(value) {
        this._xLabelFontColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#xLabelFontSize
     * @type {String}
     * @description The fontSize of x labels
     */
    get xLabelFontSize() {
        return this._xLabelFontSize;
    },

    set xLabelFontSize(value) {
        this._xLabelFontSize = value;
        this.invalidate();
    },

    /**
     * @name Chart#xLabelFontFamily
     * @type {String}
     * @description The fontFamily of x labels
     */
    get xLabelFontFamily() {
        return this._xLabelFontFamily;
    },

    set xLabelFontFamily(value) {
        this._xLabelFontFamily = value;
        this.invalidate();
    },

    /**
     * @name Chart#xLabelTextAlign
     * @type {String}
     * @description The property of textAlign of x labels
     */
    get xLabelTextAlign() {
        return this._xLabelTextAlign;
    },

    set xLabelTextAlign(value) {
        this._xLabelTextAlign = value;
        this.invalidate();
    },

    /**
     * @name Chart#yLabelFontWeight
     * @type {String}
     * @description The fontWeight of y labels
     */
    get yLabelFontWeight() {
        return this._yLabelFontWeight;
    },

    set yLabelFontWeight(value) {
        this._yLabelFontWeight = value;
        this.invalidate();
    },

    /**
     * @name Chart#yLabelFontStyle
     * @type {String}
     * @description The fontStyle of y labels
     */
    get yLabelFontStyle() {
        return this._yLabelFontStyle;
    },

    set yLabelFontStyle(value) {
        this._yLabelFontStyle = value;
        this.invalidate();
    },

    /**
     * @name Chart#yLabelFontColor
     * @type {String}
     * @description The fontColor of y labels
     */
    get yLabelFontColor() {
        return this._yLabelFontColor;
    },

    set yLabelFontColor(value) {
        this._yLabelFontColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#yLabelFontSize
     * @type {String}
     * @description The fontSize of y labels
     */
    get yLabelFontSize() {
        return this._yLabelFontSize;
    },

    set yLabelFontSize(value) {
        this._yLabelFontSize = value;
        this.invalidate();
    },

    /**
     * @name Chart#yLabelFontFamily
     * @type {String}
     * @description The fontFamily of y labels
     */
    get yLabelFontFamily() {
        return this._yLabelFontFamily;
    },

    set yLabelFontFamily(value) {
        this._yLabelFontFamily = value;
        this.invalidate();
    },

    /**
     * @name Chart#yLabelTextAlign
     * @type {String}
     * @description The property of textAlign of y labels
     */
    get yLabelTextAlign() {
        return this._yLabelTextAlign;
    },

    set yLabelTextAlign(value) {
        this._yLabelTextAlign = value;
        this.invalidate();
    },

    /**
     * @name Chart#labelMargin
     * @type {Number}
     * @description The distance between x/y labels and x/y axis
     */
    get labelMargin() {
        return this._labelMargin;
    },

    set labelMargin(value) {
        this._labelMargin = value;
        this.invalidate();
    },

    /**
     * @name Chart#rightBlank
     * @type {Number}
     * @description The distance between graph and the right end of the view
     */
    get rightBlank() {
        return this._rightBlank;
    },

    set rightBlank(value) {
        this._rightBlank = value;
        this.invalidate();
    },

    /**
     * @name Chart#topBlank
     * @type {Number}
     * @description The distance between graph and top of the view
     */
    get topBlank() {
        return this._topBlank;
    },

    set topBlank(value) {
        this._topBlank = value;
        this.invalidate();
    },

    /**
     * @name Chart#dotRadius
     * @type {Number}
     * @description The size of data point
     */
    get dotRadius() {
        return this._dotRadius;
    },

    set dotRadius(value) {
        this._dotRadius = value;
        this.invalidate();
    },

    /**
     * @name Chart#dotColor
     * @type {String}
     * @description The color filled the data point
     */
    get dotColor() {
        return this._dotColor;
    },

    set dotColor(value) {
        this._dotColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#showAverageLine
     * @type {Boolean}
     * @description Whether to show the averageline
     */
    get showAverageLine() {
        return this._showAverageLine;
    },

    set showAverageLine(value) {
        this._showAverageLine = value;
        this.invalidate();
    },

    /**
     * @name Chart#averageLineWidth
     * @type {Number}
     * @description The line width of averageline
     */
    get averageLineWidth() {
        return this._averageLineWidth;
    },

    set averageLineWidth(value) {
        this._averageLineWidth = value;
        this.invalidate();
    },

    /**
     * @name Chart#averageLineColor
     * @type {String}
     * @description The line color of averageline
     */
    get averageLineColor() {
        return this._averageLineColor;
    },

    set averageLineColor(value) {
        this._averageLineColor = value;
        this.invalidate();
    },

    /**
     * @name Chart#bezierCurve
     * @type {Boolean}
     * @description Whether to show curve or broken-line, true for bezierCurve and false for broken-line
     */
    get bezierCurve() {
        return this._bezierCurve;
    },

    set bezierCurve(value) {
        this._bezierCurve = value;
        this.invalidate();
    },

    /**
     * @method Chart#addData
     * @param {Number} The data value to be added into the Chart
     * @description Add new data at the end of the chart and then refresh the view
     */
    addData: function(value) {
        if (typeof value === "number") {
            this._dataset.push(value);
        }
        this.invalidate();
    },

    /**
     * @method Chart#addLabel
     * @param {String} The label value to be added into the end of the chart
     * @description Add new label to the chart and then refresh the view
     */
    addLabel: function(value) {
        if (typeof value === "string" &amp;&amp; value !== "") {
            this._labels.push(value);
        }
        this.invalidate();
    },

    /**
     * @method Chart#removeData
     * @description Remove the first value of the datast on the chart and the refresh the view
     */
    removeData: function() {
        this._dataset.shift();
        this.invalidate();
    },

    /**
     * @method Chart#removeData
     * @param {Number[]} the new dataset that to be show
     * @param {Number[]} the new labelset that to be show
     * @description Reset the dataset and labelset of the chart and the refresh the view
     */
    resetData: function(dataset, labelset) {
        this._dataset = dataset;
        this._labels = labelset;
        this.invalidate();
    },

    draw: function(context) {
        var maxHeight = this.getMax(this._dataset);
        var xLabelHeight = Number(this._xLabelFontSize.substr(0, this._xLabelFontSize.length - 2)) + this._labelMargin;
        context.save();
        context.font = context.font = this._yLabelFontWeight + " " + this._yLabelFontStyle + " " + this._yLabelFontSize + " " + this._yLabelFontFamily;
        var yLabelWidth = context.measureText(maxHeight).width + this._labelMargin;
        context.restore();

        this._zeroX = yLabelWidth;
        this._zeroY = this._height - xLabelHeight;
        var barWidth = (this._width - this._zeroX - this._rightBlank) / this._dataset.length - this._barSpacing;
        var ceilHeight = Math.ceil(maxHeight / this._stepsY) * this._stepsY;

        this.drawAxis(context);

        this.drawXLabels(context);
        this.drawYLabels(context, ceilHeight);

        if (this._mode === "bar") {
            this.drawBars(context, barWidth, ceilHeight);
        } else if (this._mode === "line") {
            this.drawLines(context);
        }

        if (this._showGridLine) {
            this.drawGridLines(context);
        }
    },

    drawBars: function(context, barWidth, ceilHeight) {
        context.save();
        context.fillStyle = this._fillColor;
        for (var i = 0; i &lt; this._dataset.length; i++) {
            context.beginPath();
            var rectHeight = this._dataset[i] * (this._zeroY - this._topBlank) / ceilHeight;
            var y = this._zeroY - rectHeight;
            context.rect(this._zeroX + i * (barWidth + this._barSpacing), y, barWidth, rectHeight);
            context.fill();
        }
        context.restore();
    },

    /**
     * @method Chart#drawAxis
     * @param {Context}
     * @description Draw X and Y axis of the chart
     * @private
     */
    drawAxis: function(context) {
        context.save();
        context.beginPath();
        context.lineWidth = this._strokeLineWidth;
        context.strokeStyle = this._strokeColor;

        if (this._drawXAxis) {
            context.moveTo(this._zeroX, this._zeroY);
            context.lineTo(this._width, this._zeroY);
        }
        if (this.drawYAxis) {
            context.moveTo(this._zeroX, this._zeroY);
            context.lineTo(this._zeroX, 0);
        }
        context.stroke();
        context.restore();
    },

    /**
     * @method Chart#drawGridLines
     * @param {Context}
     * @description Draw gridlines of the chart
     * @private
     */
    drawGridLines: function(context) {
        context.save();
        context.beginPath();
        context.lineWidth = this._gridLineWidth;
        context.strokeStyle = this._gridLineColor;
        var stepsX = this._labels.length - 1;
        var stepLength = (this._width - this._zeroX - this._rightBlank) / stepsX;
        for (var i = 0; i &lt;= stepsX; i++) {
            context.moveTo(this._zeroX + i * stepLength, this._zeroY);
            context.lineTo(this._zeroX + i * stepLength, this._topBlank);
        }

        stepLength = (this._zeroY - this._topBlank) / this._stepsY;
        for (var j = 0; j &lt;= this._stepsY; j++) {
            context.moveTo(this._zeroX, this._zeroY - stepLength * j);
            context.lineTo(this._width - this._rightBlank, this._zeroY - stepLength * j);
        } 
        context.stroke();
        context.restore();
    },

    /**
     * @method Chart#drawXLabels
     * @param {Context}
     * @description Draw labels of the x axis
     * @private
     */
    drawXLabels: function(context) {
        context.save();
        context.beginPath();
        context.font = this._xLabelFontWeight + " " + this._xLabelFontStyle + " " + this._xLabelFontSize + " " + this._xLabelFontFamily;
        context.textAlign = this._xLabelTextAlign;
        context.textBaseline = "top";
        context.fillStyle = this._xLabelFontColor;
        var steps = this._labels.length - 1;
        var stepLength = (this._width - this._zeroX - this._rightBlank) / steps;
        for (var i = 0; i &lt;= steps; i++) {
            context.fillText(this._labels[i], this._zeroX + i * stepLength, this._zeroY);
        }
        context.restore();
    },

    /**
     * @method Chart#drawYLabels
     * @param {Context}
     * @param {Number} the distance of the adjacent two gridlines of y axis
     * @param {Number} the maxheigth among all the bar rects of the chart
     * @description Draw labels of the y axis
     * @private
     */
    drawYLabels: function(context, maxHeight) {
        context.save();
        context.beginPath();
        context.font = this._yLabelFontWeight + " " + this._yLabelFontStyle + " " + this._yLabelFontSize + " " + this._yLabelFontFamily;
        context.textAlign = "center";
        context.textBaseline = "middle";
        context.fillStyle = this._yLabelFontColor;
        var stepLength = (this._zeroY -  this._topBlank) / this._stepsY;
        var tmp = maxHeight / this._stepsY;
        for (var i = 1; i &lt;= this._stepsY; i++) {
            context.fillText((i * tmp).toString(), this._zeroX / 2, this._zeroY - i * stepLength);
        }
        context.restore();
    },

    drawLines: function(context) {
        context.save();
        var maxHeight = this.getMax(this._dataset);
        var stepX = this._labels.length - 1;
        var stepLength = (this._width - this._zeroX - this._rightBlank) / stepX;
        context.beginPath();
        var collections = [];
        var preX = this._zeroX;
        var preY = this._zeroY - this._dataset[0] * (this._zeroY - this._topBlank) / maxHeight;
        context.moveTo(preX, preY);
        if (this._bezierCurve) {
            var curPoint = {x: this._zeroX, y: this._zeroY};
            for (var i = 0; i &lt; this._dataset.length; i++) {
                var t = i > 0 &amp;&amp; i &lt; this._dataset.length - 1 ? this._tension : 0 ;
                curPoint.x = this._zeroX + i * stepLength;
                curPoint.y = this._zeroY - this._dataset[i] * (this._zeroY - this._topBlank) / maxHeight;
                var prePoint = i === 0 ? {x: curPoint.x, y: curPoint.y} : {x: curPoint.x - stepLength, y: this._zeroY - this._dataset[i-1] * (this._zeroY - this._topBlank) / maxHeight};
                var nextPoint = i === this._dataset.length - 1 ? {x: curPoint.x, y: curPoint.y} : {x: curPoint.x + stepLength, y: this._zeroY - this._dataset[i + 1] * (this._zeroY - this._topBlank) / maxHeight};
                collections[i] = {x: curPoint.x, y: curPoint.y};
                collections[i].controlPoint = this.splineCurve(prePoint, curPoint, nextPoint, t);
            }
            for (var i = 1; i &lt; this._dataset.length; i++) {
                context.bezierCurveTo(
                    collections[i - 1].controlPoint.outer.x,
                    collections[i - 1].controlPoint.outer.y,
                    collections[i].controlPoint.inner.x,
                    collections[i].controlPoint.inner.y,
                    collections[i].x,
                    collections[i].y
                    );
            }
            i--;
            context.lineTo(this._zeroX + i * stepLength, this._zeroY);
            context.lineTo(this._zeroX, this._zeroY);
            context.lineTo(this._zeroX, this._zeroY - this._dataset[0] * (this._zeroY - this._topBlank) / maxHeight);
            context.closePath();
            context.fillStyle = this._fillColor;
            context.fill();
            context.beginPath();
            context.moveTo(preX, preY);
            for (var i = 1; i &lt; this._dataset.length; i++) {
                context.bezierCurveTo(
                    collections[i - 1].controlPoint.outer.x,
                    collections[i - 1].controlPoint.outer.y,
                    collections[i].controlPoint.inner.x,
                    collections[i].controlPoint.inner.y,
                    collections[i].x,
                    collections[i].y
                    );
            }
            context.lineWidth = this.strokeLineWidth;
            context.strokeStyle = this.strokeColor;
            context.stroke();
        } else {
            for (var i = 1; i &lt; this._dataset.length; i++) {
                var y = this._zeroY - this._dataset[i] * (this._zeroY - this._topBlank) / maxHeight; 
                context.lineTo(this._zeroX + i * stepLength, y);
            }
            i--;
            context.lineTo(this._zeroX + i * stepLength, this._zeroY);
            context.lineTo(this._zeroX, this._zeroY);
            context.lineTo(this._zeroX, this._zeroY - this._dataset[0] * (this._zeroY - this._topBlank) / maxHeight);
            context.closePath();
            context.fillStyle = this._fillColor;
            context.fill();
            context.beginPath();
            context.moveTo(preX, preY);
            for (var i = 1; i &lt; this._dataset.length; i++) {
                var y = this._zeroY - this._dataset[i] * (this._zeroY - this._topBlank) / maxHeight; 
                context.lineTo(this._zeroX + i * stepLength, y);
            }
            context.lineWidth = this._strokeLineWidth;
            context.strokeStyle = this._strokeColor;
            context.stroke();
        }
        for (var i = 0; i &lt; this._dataset.length; i++) {
            context.beginPath();
            var y = this._zeroY - this._dataset[i] * (this._zeroY - this._topBlank) / maxHeight;
            context.arc(this._zeroX + i * stepLength, y, this._dotRadius, 0, Math.PI * 2, true);
            context.closePath();
            context.strokeStyle = this._dotColor;
            context.stroke();
        }
        this.drawAxis(context);
        if (this._showGridLine) {
            this.drawGridLines(context, maxHeight);
        }
        if (this._showAverageLine) {
            this.drawAverageLine(context);
        }
        this.drawXLabels(context);
        context.restore();
    },

    drawAverageLine: function(context) {
        context.save();
        var averageValue = 0;
        for (var i = 0; i &lt; this._dataset.length; i++) {
            averageValue += this._dataset[i];
        }
        averageValue /= this._dataset.length;
        var maxHeight = this.getMax(this._dataset);
        var averageLineHeight = this._height * averageValue / maxHeight;

        context.beginPath();
        var x = this._zeroX;
        var y = this._zeroY - averageLineHeight;
        while (x &lt; this._width) {
            context.moveTo(x, y);
            context.lineTo(x + 3, y);
            x += 4;
        }
        context.lineWidth = this._averageLineWidth;
        context.strokeStyle = this._averageLineColor;
        context.stroke();
        context.restore();
    },

    getMax: function(dataArray) {
        var max = 0;
        for (var i = 0; i &lt; dataArray.length; i++) {
            if (max &lt; dataArray[i]) {
                max = dataArray[i];
            }
        }
        return max;
    },

    splineCurve: function(firstPoint, middlePoint, lastPoint, t) {
        var d1 = Math.sqrt(Math.pow(middlePoint.x - firstPoint.x, 2) + Math.pow(middlePoint.y - firstPoint.y, 2));
        var d2 = Math.sqrt(Math.pow(lastPoint.x - middlePoint.x, 2) + Math.pow(lastPoint.y - middlePoint.y, 2));

        var fa = t * d1 / (d1 + d2);
        var fb = t * d2 / (d1 + d2);
        return {
            inner: {
                x: middlePoint.x - fa * (lastPoint.x - firstPoint.x),
                y: middlePoint.y - fa * (lastPoint.y - firstPoint.y)
            },
            outer: {
                x: middlePoint.x + fb * (lastPoint.x - firstPoint.x),
                y: middlePoint.y + fb * (lastPoint.y - firstPoint.y)
            }
        };
    }
}, module);
</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Thu Nov 26 2015 15:54:21 GMT+0800 (CST)
        <br>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
